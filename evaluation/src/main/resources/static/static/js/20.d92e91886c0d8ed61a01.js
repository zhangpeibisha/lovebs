webpackJsonp([20],{KLJ6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("woOf"),l=i.n(s),a=i("VR4j"),n=(i("zL8q"),i("d2gY")),o={keyword:null,word:null,blurry:!1,page:1,limit:5},r={name:"professionList",data:function(){return{editSkuInfo:{dialogVisible:!1,keyword:null},operateType:null,listQuery:l()({},o),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],facultyList:[],teacherList:[],editDialog:!1,profession:{facultyVo:{},teacher:{}},dialogTitle:"",showImportTask:!1,uploadUrl:n.e}},created:function(){this.getFetchTeacherList(),this.getList(),this.getFacultyList()},watch:{},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.quire="and 1 = 1",this.listQuery.keyword&&(this.listQuery.quire+=" and (coding like '%"+this.listQuery.keyword+"%' or name like '%"+this.listQuery.keyword+"%') "),this.listQuery.facultyId&&(this.listQuery.quire+=" and facultyId = "+this.listQuery.facultyId),Object(a.d)(this.listQuery).then(function(e){t.listLoading=!1,t.list=e.data.data,t.total=e.data.total})},getFacultyList:function(){var t=this;Object(a.c)({}).then(function(e){t.facultyList=e.data.data})},getFetchTeacherList:function(){var t=this;Object(a.e)({quire:"and 1 = 1"}).then(function(e){t.teacherList=e.data.data})},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=l()({},o),this.getList()},getTheacher:function(t){var e=this.teacherList.filter(function(e){return e.id===t})[0];if(e)return e;return{name:"无"}},handleDelete:function(t,e){var i=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e?[e.id]:[];i.multipleSelection.forEach(function(e){return t.push(e.id)}),console.log(t),Object(a.a)({ids:t.toString()}).then(function(t){i.getList()})})},edit:function(){var t=this;this.profession.id?Object(a.g)(this.profession).then(function(e){t.editDialog=!1,t.$message({message:"修改成功",type:"success"})}):Object(a.b)(this.profession).then(function(e){t.editDialog=!1,t.getList(),t.$message({message:"添加成功",type:"success"})})},uploadTaskSuccess:function(){this.$message({message:"专业上传成功",type:"success"}),this.getList()},uploadTaskError:function(){this.$message({message:"专业上传失败",type:"error"})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",staticStyle:{height:"500px","overflow-y":"scroll"}},[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),t._v(" "),i("span",[t._v("筛选搜索")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.getList()}}},[t._v("查询结果")]),t._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.handleResetSearch()}}},[t._v("重置\n      ")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-form",{attrs:{inline:!0,model:t.listQuery,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"输入搜索："}},[i("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"关键字"},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"学院："}},[i("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:""},model:{value:t.listQuery.facultyId,callback:function(e){t.$set(t.listQuery,"facultyId",e)},expression:"listQuery.facultyId"}},t._l(t.facultyList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1)]),t._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",[t._v("专业数据")]),t._v(" "),i("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){t.profession={facultyVo:{},teacher:{}},t.editDialog=!0,t.dialogTitle="添加"}}},[t._v("添加\n    ")]),t._v(" "),i("el-button",{staticClass:"btn-add",attrs:{type:"success",size:"mini"},on:{click:function(e){t.showImportTask=!0}}},[t._v("导入专业信息\n    ")])],1),t._v(" "),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.coding))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"专业名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"系主任",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getTheacher(e.row.departmentId).name))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.profession=e.row,t.editDialog=!0,t.profession.type="see",t.dialogTitle="查看"}}},[t._v("查看\n          ")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.profession=e.row,t.editDialog=!0,t.dialogTitle="编辑",t.profession.type="edit"}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":t.listQuery.limit,"page-sizes":[5,10,15],"current-page":t.listQuery.page,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),i("el-dialog",{attrs:{title:"上传专业信息",visible:t.showImportTask,width:"30%"},on:{"update:visible":function(e){t.showImportTask=e}}},[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":t.uploadTaskSuccess,"on-error":t.uploadTaskError,action:t.uploadUrl,multiple:"",headers:"{'Content-Type':'application/x-www-form-urlencoded'}",name:"faculty"}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请规范excel格式，不然无法导入")])]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showImportTask=!1}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.editDialog,width:"30%"},on:{"update:visible":function(e){t.editDialog=e}}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"编号"}},[i("el-input",{attrs:{disabled:"see"==t.profession.type},model:{value:t.profession.coding,callback:function(e){t.$set(t.profession,"coding",e)},expression:"profession.coding"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"专业名称"}},[i("el-input",{attrs:{disabled:"see"==t.profession.type},model:{value:t.profession.name,callback:function(e){t.$set(t.profession,"name",e)},expression:"profession.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"学院："}},[i("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:"",disabled:"see"==t.profession.type},model:{value:t.profession.facultyId,callback:function(e){t.$set(t.profession,"facultyId",e)},expression:"profession.facultyId"}},t._l(t.facultyList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"指导老师："}},[i("el-select",{attrs:{placeholder:"请选指导老师",clearable:"",filterable:"",disabled:"see"==t.profession.type},model:{value:t.profession.departmentId,callback:function(e){t.$set(t.profession,"departmentId",e)},expression:"profession.departmentId"}},t._l(t.teacherList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),"see"!=t.profession.type?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editDialog=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.edit()}}},[t._v("确 定")])],1):t._e()],1)],1)},staticRenderFns:[]},u=i("VU/8")(r,c,!1,null,null,null);e.default=u.exports}});
//# sourceMappingURL=20.d92e91886c0d8ed61a01.js.map