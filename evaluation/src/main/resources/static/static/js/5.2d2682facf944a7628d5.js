webpackJsonp([5],{SzKx:function(e,t){},ZPM0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:{question:{type:Object,required:!0},qIndex:{type:Number,required:!0}},data:function(){return{chooseId:""}},methods:{answer:function(e){console.log("eeee",e),console.log("this.question",this.question),this.$parent.answer({questionnaireEnum:this.question.questionnaireType,questionId:this.question.id,title:this.question.title,suggest:e.target.value})},radioChoose:function(){this.$parent.answer({questionnaireEnum:this.question.questionnaireType,questionId:this.question.id,title:this.question.title,chooseId:this.chooseId})},checkboxChoose:function(){var e="";this.question.items.filter(function(e){return e.choose}).forEach(function(t){e+=t.id+","}),this.$parent.answer({questionnaireEnum:this.question.questionnaireType,questionId:this.question.id,title:this.question.title,chooseId:e.length>0?e.substring(0,e.length-1):e})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("div",{staticClass:"content"},[s("p",[e._v(e._s(e.question.title))]),e._v(" "),"text"!==e.question.questionnaireType?s("ol",{staticClass:"answers"},e._l(e.question.items,function(t){return s("li",{staticClass:"answer"},["checkbox"===e.question.questionnaireType&&"checkbox"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.choose,expression:"answer.choose"}],staticClass:"select",attrs:{name:e.question.id,type:"checkbox"},domProps:{value:""+t.id,checked:Array.isArray(t.choose)?e._i(t.choose,""+t.id)>-1:t.choose},on:{change:[function(s){var i=t.choose,o=s.target,n=!!o.checked;if(Array.isArray(i)){var a=""+t.id,c=e._i(i,a);o.checked?c<0&&e.$set(t,"choose",i.concat([a])):c>-1&&e.$set(t,"choose",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(t,"choose",n)},e.checkboxChoose]}}):"radio"===e.question.questionnaireType&&"checkbox"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.choose,expression:"answer.choose"}],staticClass:"select",attrs:{name:e.question.id,type:"radio"},domProps:{value:""+t.id,checked:e._q(t.choose,""+t.id)},on:{change:[function(s){e.$set(t,"choose",""+t.id)},e.checkboxChoose]}}):"checkbox"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.choose,expression:"answer.choose"}],staticClass:"select",attrs:{name:e.question.id,type:e.question.questionnaireType},domProps:{value:""+t.id,value:t.choose},on:{change:e.checkboxChoose,input:function(s){s.target.composing||e.$set(t,"choose",s.target.value)}}}):e._e(),e._v(" "),"checkbox"===e.question.questionnaireType&&"radio"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.chooseId,expression:"chooseId"}],staticClass:"select",attrs:{name:e.question.id,type:"checkbox"},domProps:{value:""+t.id,checked:Array.isArray(e.chooseId)?e._i(e.chooseId,""+t.id)>-1:e.chooseId},on:{change:[function(s){var i=e.chooseId,o=s.target,n=!!o.checked;if(Array.isArray(i)){var a=""+t.id,c=e._i(i,a);o.checked?c<0&&(e.chooseId=i.concat([a])):c>-1&&(e.chooseId=i.slice(0,c).concat(i.slice(c+1)))}else e.chooseId=n},e.radioChoose]}}):"radio"===e.question.questionnaireType&&"radio"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.chooseId,expression:"chooseId"}],staticClass:"select",attrs:{name:e.question.id,type:"radio"},domProps:{value:""+t.id,checked:e._q(e.chooseId,""+t.id)},on:{change:[function(s){e.chooseId=""+t.id},e.radioChoose]}}):"radio"==e.question.questionnaireType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.chooseId,expression:"chooseId"}],staticClass:"select",attrs:{name:e.question.id,type:e.question.questionnaireType},domProps:{value:""+t.id,value:e.chooseId},on:{change:e.radioChoose,input:function(t){t.target.composing||(e.chooseId=t.target.value)}}}):e._e(),e._v(" "),s("div",{staticClass:"option"},[s("div",{staticClass:"input-fix"},[s("p",[e._v(e._s(t.title))])])])])})):e._e(),e._v(" "),"text"===e.question.questionnaireType?s("div",{staticClass:"option"},[s("textarea",{staticClass:"textarea",on:{change:function(t){e.answer(t)}}})]):e._e()]),e._v(" "),s("div",{staticClass:"side"},[s("div",{staticClass:"order"},[e._v("Q"+e._s(e.qIndex+1))])])])},staticRenderFns:[]};var n=s("VU/8")(i,o,!1,function(e){s("SzKx")},"data-v-7257caec",null).exports,a=s("NoTa"),c=s("UDO9"),r=s("l2la"),u=s("Ozlq"),d={data:function(){window.sessionStorage.getItem("edit-mode")?window.sessionStorage.getItem("edit-mode"):("create",window.sessionStorage.setItem("edit-mode","create"));return{title:"问卷题目",questions:[],showAlert:!1,publish:!1,showModal:!1,routerCanDeactivate:!1,expires:"",qnId:-1,isLoading:!1,answers:{questionReplies:[]},publishId:-1}},computed:{},methods:{saveData:function(){this.answers.status="commit",this.answers.studentId="",Object(u.c)({publisId:this.publishId},this.answers).then(function(e){})},answer:function(e){console.log("a==",e),1==this.answers.questionReplies.filter(function(t){return t.questionId==e.questionId}).length?this.answers.questionReplies=this.answers.questionReplies.map(function(t){return t.questionId==e.questionId?e:t}):this.answers.questionReplies.push(e)},transposition:function(e,t,s){var i=e.splice(t,1)[0];e.splice(s,0,i)},saveBtnHandler:function(){this.saveData()},getParams:function(){this.publishId=this.$route.query.publishId},findEvaluationById:function(e){var t=this;Object(u.e)(e).then(function(e){if(console.log("查询问卷信息",e),200===e.code){var s=e.data;t.questions=s.content.questions,t.title=s.title,t.author=s.author}})},findPublishQuestionById:function(){var e=this;Object(u.f)(this.publishId).then(function(t){var s=t.data;e.findEvaluationById(s.questionnaireid)})}},created:function(){this.getParams(),this.findPublishQuestionById()},components:{Question:n,Calendar:a.a,Alert:c.a,Modal:r.a},route:{canDeactivate:function(){return!!this.canDeactivate||(this.showModal=!0,!1)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout"},[s("div",{staticClass:"qn-wrap"},[s("div",{staticClass:"qn"},[s("header",{staticClass:"header"},[s("p",{staticClass:"title"},[e._v(e._s(e.title))])]),e._v(" "),s("div",{staticClass:"body"},[s("div",{staticClass:"body-wrap"},[0!==e.questions.length?s("ol",{staticClass:"questions"},e._l(e.questions,function(e,t){return s("question",{tag:"li",staticClass:"question",attrs:{"track-by":"$index",qIndex:t,question:e}})})):e._e()])]),e._v(" "),s("footer",{staticClass:"footer"},[s("div",{staticClass:"pick-date"}),e._v(" "),s("div",{staticClass:"operation"},[s("span",{staticClass:"btn",class:{disabled:e.isLoading},on:{click:e.saveData}},[e._v("提交问卷")])])])])])])},staticRenderFns:[]};var h=s("VU/8")(d,l,!1,function(e){s("nJf9")},null,null);t.default=h.exports},nJf9:function(e,t){}});
//# sourceMappingURL=5.2d2682facf944a7628d5.js.map