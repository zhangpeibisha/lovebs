webpackJsonp([15],{AFc8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),l=a.n(i),n=a("4b3y"),s=a("d2gY"),o=a("VR4j"),c={key:null,word:null,blurry:!1,page:1,limit:5},r={data:function(){return{editSkuInfo:{dialogVisible:!1,keyword:null},operateType:null,listQuery:l()({},c),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],editDialog:!1,faculty:{coding:"",name:"",dean:{accountId:0,name:""}},dialogTitle:"",importDia:!1,showImportTask:!1,uploadUrl:s.d,teacherList:[]}},created:function(){this.getFetchTeacherList(),this.getList()},watch:{},methods:{getList:function(){var t=this;this.listLoading=!0,this.listQuery.quire="and 1 = 1",this.listQuery.keyword&&(this.listQuery.quire+=" and (coding like '%"+this.listQuery.keyword+"%' or name like '%"+this.listQuery.keyword+"%')"),Object(n.c)(this.listQuery).then(function(e){t.listLoading=!1,t.list=e.data.data,t.total=e.data.total})},handleSizeChange:function(t){this.listQuery.page=1,this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=l()({},c),this.getList()},getFetchTeacherList:function(){var t=this;Object(o.e)({quire:"and 1 = 1"}).then(function(e){t.teacherList=e.data.data})},uploadSuccess:function(){this.importDia=!1,this.$message({message:"学院信息上传成功",type:"success"}),this.getList()},uploadError:function(){console.log("error"),this.$message({message:"学院信息上传失败",type:"error"})},handleDelete:function(t,e,a){var i=this;console.log("index=",t),console.log("row=",e),console.log("batch",a),this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];a||(t.push(e.id),console.log("获取的值为:",t)),i.multipleSelection.forEach(function(e){return t.push(e.id)}),console.log("选中的row",i.multipleSelection),Object(n.a)(t).then(function(t){console.log("删除返回结果",t),i.getList()})})},edit:function(){var t=this;if(this.faculty.id){var e={};e.coding=this.faculty.coding,e.dean=this.faculty.dean.accountId,e.id=this.faculty.id,e.name=this.faculty.name,Object(n.f)(e).then(function(e){console.log("编辑学院结果返回",e),t.editDialog=!1,t.$message({message:"学院信息编辑成功",type:"success"}),t.getList()})}else{var a={};a.coding=this.faculty.coding,a.dean=this.faculty.dean.accountId,a.name=this.faculty.name,Object(n.b)(a).then(function(e){console.log("添加学院结果返回",e),t.editDialog=!1,t.$message({message:"学院信息添加成功",type:"success"}),t.getList()})}},uploadTaskSuccess:function(){this.$message({message:"学院信息上传成功",type:"success"}),this.getList()},uploadTaskError:function(){this.$message({message:"学院信息上传失败",type:"error"})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",staticStyle:{height:"500px","overflow-y":"scroll"}},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.getList()}}},[t._v("查询结果\n      ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.handleResetSearch()}}},[t._v("重置\n      ")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:t.listQuery,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"输入搜索："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"关键字"},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1)],1)],1)]),t._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",[t._v("学院数据")]),t._v(" "),a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){t.editDialog=!0,t.faculty={coding:"",name:"",dean:{accountId:"",name:""}},t.dialogTitle="添加"}}},[t._v("添加\n    ")]),t._v(" "),a("el-button",{staticClass:"btn-add",attrs:{type:"success",size:"mini"},on:{click:function(e){t.showImportTask=!0}}},[t._v("导入学院信息\n    ")])],1),t._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.coding))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"学院名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"院长",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dean?e.row.dean.name:""))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.faculty=e.row,t.editDialog=!0,t.faculty.type="see",t.dialogTitle="查看",t.faculty.dean.accountId=e.row.dean?e.row.dean.name:"无"}}},[t._v("查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.faculty=e.row,t.editDialog=!0,t.dialogTitle="编辑",t.faculty.type="edit",t.faculty.dean.accountId=""}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":t.listQuery.limit,"page-sizes":[5,10,15],"current-page":t.listQuery.page,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.editDialog,width:"30%"},on:{"update:visible":function(e){t.editDialog=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{attrs:{disabled:"see"===t.faculty.type},model:{value:t.faculty.coding,callback:function(e){t.$set(t.faculty,"coding",e)},expression:"faculty.coding"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学院名"}},[a("el-input",{attrs:{disabled:"see"===t.faculty.type},model:{value:t.faculty.name,callback:function(e){t.$set(t.faculty,"name",e)},expression:"faculty.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"院长"}},[a("el-select",{attrs:{placeholder:"请选院长",clearable:"",filterable:"",disabled:"see"===t.faculty.type},model:{value:t.faculty.dean.accountId,callback:function(e){t.$set(t.faculty.dean,"accountId",e)},expression:"faculty.dean.accountId"}},t._l(t.teacherList,function(t){return a("el-option",{key:t.accountId,attrs:{label:t.name,value:t.accountId}})}))],1)],1),t._v(" "),"see"!==t.faculty.type?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.edit()}}},[t._v("确 定")])],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"上传学院信息",visible:t.showImportTask,width:"30%"},on:{"update:visible":function(e){t.showImportTask=e}}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":t.uploadTaskSuccess,"on-error":t.uploadTaskError,action:t.uploadUrl,multiple:"",headers:"{'Content-Type':'application/x-www-form-urlencoded'}",name:"faculty"}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请规范excel格式，不然无法导入")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showImportTask=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,u,!1,function(t){a("iAsz")},null,null);e.default=d.exports},iAsz:function(t,e){}});
//# sourceMappingURL=15.cf1e84d0ca1e514bb2ed.js.map