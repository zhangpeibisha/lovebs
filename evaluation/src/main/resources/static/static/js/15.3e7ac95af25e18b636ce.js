webpackJsonp([15],{KLJ6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("woOf"),n=i.n(l),a=i("VR4j"),s=i("zL8q"),o={keyword:null,word:null,blurry:!1,page:1,limit:5},r={name:"professionList",data:function(){return{editSkuInfo:{dialogVisible:!1,keyword:null},operateType:null,listQuery:n()({},o),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],facultyList:[],teacherList:[],editDialog:!1,profession:{facultyVo:{},teacher:{}},dialogTitle:""}},created:function(){this.getFetchTeacherList(),this.getList(),this.getFacultyList()},watch:{},methods:{getList:function(){var e=this;this.listLoading=!0,this.listQuery.quire="and 1 = 1",this.listQuery.keyword&&(this.listQuery.quire+=" and (coding like '%"+this.listQuery.keyword+"%' or name like '%"+this.listQuery.keyword+"%') "),this.listQuery.facultyId&&(this.listQuery.quire+=" and facultyId = "+this.listQuery.facultyId),Object(a.d)(this.listQuery).then(function(t){e.listLoading=!1,e.list=t.data.data,e.total=1})},getFacultyList:function(){var e=this;Object(a.c)({}).then(function(t){e.facultyList=t.data.data})},getFetchTeacherList:function(){var e=this;Object(a.e)({quire:"and 1 = 1"}).then(function(t){e.teacherList=t.data.data})},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=n()({},o),this.getList()},getTheacher:function(e){return this.teacherList.filter(function(t){return t.id===e})[0]},handleDelete:function(e,t){var i=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t?[t.id]:[];i.multipleSelection.forEach(function(t){return e.push(t.id)}),console.log(e),Object(a.a)({ids:e.toString()}).then(function(e){i.getList()})})},edit:function(){var e=this;this.profession.id?Object(a.g)(this.profession).then(function(t){e.editDialog=!1,Object(s.Message)({message:"修改成功",type:"success",duration:1e3})}):Object(a.b)(this.profession).then(function(t){e.editDialog=!1,e.getList(),Object(s.Message)({message:"添加成功",type:"success",duration:1e3})})}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container",staticStyle:{height:"500px","overflow-y":"scroll"}},[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("div",[i("i",{staticClass:"el-icon-search"}),e._v(" "),i("span",[e._v("筛选搜索")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.getList()}}},[e._v("查询结果")]),e._v(" "),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){e.handleResetSearch()}}},[e._v("重置")])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[i("el-form-item",{attrs:{label:"输入搜索："}},[i("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"关键字"},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"学院："}},[i("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:""},model:{value:e.listQuery.facultyId,callback:function(t){e.$set(e.listQuery,"facultyId",t)},expression:"listQuery.facultyId"}},e._l(e.facultyList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)]),e._v(" "),i("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[i("i",{staticClass:"el-icon-tickets"}),e._v(" "),i("span",[e._v("专业数据")]),e._v(" "),i("el-button",{staticClass:"btn-add",attrs:{type:"danger",size:"mini"},on:{click:function(t){e.handleDelete()}}},[e._v("删除")]),e._v(" "),i("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){e.profession={facultyVo:{},teacher:{}},e.editDialog=!0,e.dialogTitle="添加"}}},[e._v("添加")])],1),e._v(" "),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"professionTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.coding))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"专业名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"系主任",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getTheacher(t.row.departmentid).name))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"学院",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.profession=t.row,e.editDialog=!0,e.profession.type="see",e.dialogTitle="查看"}}},[e._v("查看")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.profession=t.row,e.editDialog=!0,e.dialogTitle="编辑",e.profession.type="edit"}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":e.listQuery.limit,"page-sizes":[5,10,15],"current-page":e.listQuery.page,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editDialog,width:"30%"},on:{"update:visible":function(t){e.editDialog=t}}},[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"编号"}},[i("el-input",{attrs:{disabled:"see"==e.profession.type},model:{value:e.profession.coding,callback:function(t){e.$set(e.profession,"coding",t)},expression:"profession.coding"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"专业名称"}},[i("el-input",{attrs:{disabled:"see"==e.profession.type},model:{value:e.profession.name,callback:function(t){e.$set(e.profession,"name",t)},expression:"profession.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"学院："}},[i("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:"",disabled:"see"==e.profession.type},model:{value:e.profession.facultyid,callback:function(t){e.$set(e.profession,"facultyid",t)},expression:"profession.facultyid"}},e._l(e.facultyList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"指导老师："}},[i("el-select",{attrs:{placeholder:"请选指导老师",clearable:"",filterable:"",disabled:"see"==e.profession.type},model:{value:e.profession.departmentid,callback:function(t){e.$set(e.profession,"departmentid",t)},expression:"profession.departmentid"}},e._l(e.teacherList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),"see"!=e.profession.type?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.edit()}}},[e._v("确 定")])],1):e._e()],1)],1)},staticRenderFns:[]},u=i("VU/8")(r,c,!1,null,null,null);t.default=u.exports},VR4j:function(e,t,i){"use strict";t.d=function(e){return Object(l.a)({url:"/profession/quire/list",method:"get",params:e})},t.c=function(e){return Object(l.a)({url:"/faculty/quire/list",method:"get",params:e})},t.f=function(e){return Object(l.a)({url:"/profession/findById",method:"get",params:{id:e}})},t.e=function(e){return Object(l.a)({url:"/teacher/quire/list",method:"get",params:e})},t.b=function(e){return Object(l.a)({url:"/profession/add",method:"post",params:e})},t.g=function(e){return Object(l.a)({url:"/profession/update",method:"put",params:e})},t.a=function(e){return Object(l.a)({url:"/profession/delete",method:"delete",params:e})};var l=i("vLgD")}});
//# sourceMappingURL=15.3e7ac95af25e18b636ce.js.map