webpackJsonp([16],{ZHWs:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("vLgD");var a={name:"resourceList",inject:["reload"],data:function(){return{list:null,total:null,multipleSelection:[],deletePopoverView:!1,updatePopoverView:!1,tempData:null,labelPosition:"right",updateResource:{url:"",name:"",description:"",method:[],permissionAll:"",use:""},page:{currPage:1,total:20},baseUrl:Object(o.b)(),selectValue:null,selectTypes:[{label:"角色",type:"role"},{label:"请求路径",type:"url"},{label:"请求方法",type:"method"},{label:"匿名使用",type:"permissionALl"}],selectType:"",addResourceModel:{url:"",name:"",description:"",method:[],permissionAll:!1,use:!0},addResourcePopoverView:!1}},created:function(){this.getList()},methods:{getList:function(){var e,t,l=this;(e=this.page.currPage,t=this.page.total,Object(o.a)({url:"/admin/resources/list",method:"get",params:{pageSize:t,currPage:e}})).then(function(e){200===e.code&&(l.list=e.data,l.total=e.count,console.log("获取到的数据为",l.list))})},permissionAllFormtter:function(e){return e.permissionAll?"可匿名访问":"不可匿名访问"},userFormatter:function(e){return e.use?"开启":"关闭"},deleteClick:function(){var e;this.deletePopoverView=!1,console.log("需要删除的值",this.tempData),(e=this.tempData.id,Object(o.a)({url:"/admin/resources/"+e,method:"delete"})).then(function(e){console.log("删除响应信息",e)}),this.reload()},handleSelectionChange:function(e){this.multipleSelection=e},showDeletePopover:function(e){this.deletePopoverView=!0,this.tempData=e},showUpdatePopover:function(e){console.log("更新信息",e),this.updatePopoverView=!0,this.tempData=e,this.updateResource=e},addResourceBtn:function(){this.addResourcePopoverView=!0},addResourceRun:function(){this.addResourcePopoverView=!1,console.log("获取到的添加数据",this.addRoleModel)},handleSizeChange:function(e){console.log("当前分页数量",e)},handleCurrentChange:function(e){console.log("当前页信息",e)},selectInfo:function(e,t){console.log("搜索携带的数据为",e,t)}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticStyle:{height:"500px","overflow-y":"scroll"}},[l("el-dialog",{attrs:{title:"删除资源",visible:e.deletePopoverView,width:"30%"},on:{"update:visible":function(t){e.deletePopoverView=t}}},[l("span",[e._v("是否要删除该资源配置")]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.deletePopoverView=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.deleteClick}},[e._v("确 定")])],1)])],1),e._v(" "),l("div",[l("el-dialog",{attrs:{title:"更新资源信息",visible:e.updatePopoverView},on:{"update:visible":function(t){e.updatePopoverView=t}}},[l("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.updateResource}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:e.updateResource.name,callback:function(t){e.$set(e.updateResource,"name",t)},expression:"updateResource.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"请求地址"}},[l("el-input",{attrs:{placeholder:"请输入资源地址"},model:{value:e.updateResource.url,callback:function(t){e.$set(e.updateResource,"url",t)},expression:"updateResource.url"}},[l("template",{slot:"prepend"},[e._v(e._s(this.baseUrl))])],2)],1),e._v(" "),l("el-form-item",{attrs:{label:"请求方法"}},[l("el-checkbox-group",{model:{value:e.updateResource.method,callback:function(t){e.$set(e.updateResource,"method",t)},expression:"updateResource.method"}},[l("el-checkbox",{attrs:{label:"GET",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"POST",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"PUT",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"DELETE",name:"method"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"使用描述"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"请输入内容"},model:{value:e.updateResource.description,callback:function(t){e.$set(e.updateResource,"description",t)},expression:"updateResource.description"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"资源配置"}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"匿名访问"}},[l("el-switch",{model:{value:e.updateResource.permissionAll,callback:function(t){e.$set(e.updateResource,"permissionAll",t)},expression:"updateResource.permissionAll"}})],1)],1),e._v(" "),l("el-col",{staticClass:"line",attrs:{span:1}},[e._v(" ")]),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"开关"}},[l("el-switch",{model:{value:e.updateResource.use,callback:function(t){e.$set(e.updateResource,"use",t)},expression:"updateResource.use"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.updatePopoverView=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updatePopoverView=!1}}},[e._v("确 定")])],1)],1)],1),e._v(" "),l("div",[l("el-dialog",{attrs:{title:"添加资源",visible:e.addResourcePopoverView},on:{"update:visible":function(t){e.addResourcePopoverView=t}}},[l("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.addResourceModel}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:e.addResourceModel.name,callback:function(t){e.$set(e.addResourceModel,"name",t)},expression:"addResourceModel.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"请求地址"}},[l("el-input",{attrs:{placeholder:"请输入资源地址"},model:{value:e.addResourceModel.url,callback:function(t){e.$set(e.addResourceModel,"url",t)},expression:"addResourceModel.url"}},[l("template",{slot:"prepend"},[e._v(e._s(this.baseUrl))])],2)],1),e._v(" "),l("el-form-item",{attrs:{label:"请求方法"}},[l("el-checkbox-group",{model:{value:e.addResourceModel.method,callback:function(t){e.$set(e.addResourceModel,"method",t)},expression:"addResourceModel.method"}},[l("el-checkbox",{attrs:{label:"GET",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"POST",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"PUT",name:"method"}}),e._v(" "),l("el-checkbox",{attrs:{label:"DELETE",name:"method"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"使用描述"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"请输入内容"},model:{value:e.addResourceModel.description,callback:function(t){e.$set(e.addResourceModel,"description",t)},expression:"addResourceModel.description"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"资源配置"}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"匿名访问"}},[l("el-switch",{model:{value:e.addResourceModel.permissionAll,callback:function(t){e.$set(e.addResourceModel,"permissionAll",t)},expression:"addResourceModel.permissionAll"}})],1)],1),e._v(" "),l("el-col",{staticClass:"line",attrs:{span:1}},[e._v(" ")]),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"开关"}},[l("el-switch",{model:{value:e.addResourceModel.use,callback:function(t){e.$set(e.addResourceModel,"use",t)},expression:"addResourceModel.use"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.addRolePopoverView=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.addResourceRun}},[e._v("确 定")])],1)],1)],1),e._v(" "),l("div",{staticStyle:{"justify-items":"center","margin-top":"15px","margin-left":"13%"}},[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:16}},[l("div",{staticClass:"grid-content bg-purple"},[l("div",{staticClass:"grid-content bg-purple"},[l("div",[l("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[l("el-select",{attrs:{slot:"prepend",placeholder:"请选择查询类型"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[l("el-option",{attrs:{label:"名称",value:"role"}}),e._v(" "),l("el-option",{attrs:{label:"请求路径",value:"url"}}),e._v(" "),l("el-option",{attrs:{label:"请求方法",value:"method"}}),e._v(" "),l("el-option",{attrs:{label:"匿名访问",value:"permissionAll"}})],1),e._v(" "),l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.selectInfo(e.selectValue,e.selectType)}},slot:"append"})],1)],1)])])]),e._v(" "),l("el-col",{attrs:{span:3}},[l("div",{staticClass:"grid-content"},[l("div",{staticStyle:{"margin-left":"10%","margin-right":"0px"}},[l("el-row",[l("el-button",{attrs:{type:"success"},on:{click:e.addResourceBtn}},[e._v("添加资源")])],1)],1)])]),e._v(" "),l("el-col",{attrs:{span:3}},[l("div",{staticClass:"grid-content"},[l("div",{staticStyle:{"margin-left":"0px"}},[l("el-row",[l("el-button",{attrs:{type:"danger"}},[e._v("批量删除")])],1)],1)])])],1)],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"名称",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"url",label:"请求地址","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"method",label:"请求方法"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popover",{attrs:{trigger:"hover",placement:"top"}},[l("p",[e._v("描述可以使用的http请求方法")]),e._v(" "),l("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},e._l(t.row.method,function(t){return l("div",{staticStyle:{display:"inline-block"}},[l("el-tag",{attrs:{size:"mini"}},[e._v(e._s(t))])],1)}))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"description",label:"使用描述","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"匿名访问",prop:"permissionAll",formatter:e.permissionAllFormtter}}),e._v(" "),l("el-table-column",{attrs:{prop:"use",label:"开关",formatter:e.userFormatter}}),e._v(" "),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.showDeletePopover(t.row)}}},[e._v("删除")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.showUpdatePopover(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),l("div",{staticClass:"block"},[l("el-pagination",{attrs:{"current-page":e.page.currPage,"page-sizes":[10,15,20,30],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=l("VU/8")(a,s,!1,function(e){l("tDqO")},null,null);t.default=r.exports},tDqO:function(e,t){}});
//# sourceMappingURL=16.8b14e86868df75519a60.js.map