webpackJsonp([6],{"4b3y":function(e,t,s){"use strict";t.c=function(e){return Object(l.a)({url:"/faculty/quire/list",method:"get",params:e})},t.b=function(e){return Object(l.a)({url:"/faculty/add",method:"post",params:e})},t.e=function(e){return Object(l.a)({url:"/faculty/update",method:"put",params:e})},t.d=function(e){return Object(l.a)({url:"/faculty/findById",method:"get",params:{id:e}})},t.a=function(e){console.log("获取到的参数为:",e);var t="";return e.forEach(function(e){return t+=e+","}),console.log("获取到str",t),Object(l.a)({url:"/faculty/deletes",method:"delete",params:{ids:t}})};var l=s("vLgD")},G6mj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("woOf"),i=s.n(l),a=s("VR4j"),n=s("4b3y"),o=s("VLUi"),r=s("vLgD");var c=s("ts7I"),u=s("zL8q"),d={keyword:null,word:null,blurry:!1,page:1,limit:5},f={name:"classList",data:function(){return{editSkuInfo:{dialogVisible:!1,keyword:null},operateType:null,listQuery:i()({},d),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],facultyList:[],professionList:[],teacherList:[],editDialog:!1,classModel:{profession:{faculty:{}},teacher:{}},dialogTitle:""}},created:function(){this.getList(),this.getFacultyList(),this.getFetchTeacherList()},watch:{},methods:{getList:function(){var e,t=this;this.listLoading=!0,this.listQuery.quire="and 1 = 1",this.listQuery.keyword&&(this.listQuery.quire+="and name like '%"+this.listQuery.keyword+"%') "),this.listQuery.facultyId&&!this.listQuery.professionId&&(this.listQuery.quire+=" and professionId in (select id from profession where facultyId = "+this.listQuery.facultyId+")"),this.listQuery.professionId&&!this.listQuery.classid&&(this.listQuery.quire+=" and professionId = "+this.listQuery.professionId),(e=this.listQuery,Object(r.a)({url:"/class/quire/list",method:"get",params:e})).then(function(e){t.listLoading=!1,t.list=[];var s=e.data.data;s.forEach(function(e){e.profession={},e.teacher={},Object(a.f)(e.professionid).then(function(l){var i=l.data;Object(n.d)(i.facultyid).then(function(l){i.faculty=l.data,e.profession=i,t.list=s})}),Object(o.d)(e.teacherid).then(function(t){return e.teacher=t.data})}),t.total=1})},getFacultyList:function(){var e=this;Object(c.e)({}).then(function(t){e.facultyList=t.data.data})},getFetchTeacherList:function(){var e=this;Object(a.e)({quire:"and 1 = 1"}).then(function(t){e.teacherList=t.data.data})},getProfessionList:function(e){var t=this;this.professionList=[],Object(c.g)({quire:" and facultyId = "+(e||this.listQuery.facultyId)}).then(function(s){var l=s.data.data;l&&l.length>0&&(e?t.classModel.professionid=l[0].id:t.listQuery.professionId=l[0].id),t.professionList=l})},handleSizeChange:function(e){this.listQuery.page=1,this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=i()({},d),this.getList()},getTheacher:function(e){return this.teacherList.filter(function(t){return t.id===e})[0]},handleDelete:function(e,t){var s=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,l=t?[t.id]:[];s.multipleSelection.forEach(function(e){return l.push(e.id)}),console.log(l),(e={ids:l.toString()},Object(r.a)({url:"/class/delete",method:"delete",params:e})).then(function(e){s.getList()})})},edit:function(){var e,t=this,s=this.classModel;s.id?(e=s,Object(r.a)({url:"/class/update",method:"put",params:e})).then(function(e){t.editDialog=!1,t.getList(),Object(u.Message)({message:"修改成功",type:"success",duration:1e3})}):(console.log("需要添加的班级信息为：",this.classModel),function(e){return Object(r.a)({url:"/class/add",method:"post",params:e})}(this.classModel).then(function(e){t.editDialog=!1,t.getList(),Object(u.Message)({message:"添加成功",type:"success",duration:1e3})}))}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container",staticStyle:{height:"500px","overflow-y":"scroll"}},[s("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[s("div",[s("i",{staticClass:"el-icon-search"}),e._v(" "),s("span",[e._v("筛选搜索")]),e._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.getList()}}},[e._v("查询结果")]),e._v(" "),s("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){e.handleResetSearch()}}},[e._v("重置")])],1),e._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[s("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[s("el-form-item",{attrs:{label:"输入搜索："}},[s("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"关键字"},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学院："}},[s("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:""},on:{change:function(t){e.listQuery.professionId=null,e.getProfessionList()}},model:{value:e.listQuery.facultyId,callback:function(t){e.$set(e.listQuery,"facultyId",t)},expression:"listQuery.facultyId"}},e._l(e.facultyList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"专业："}},[s("el-select",{attrs:{placeholder:"请选择专业",clearable:"",filterable:""},model:{value:e.listQuery.professionId,callback:function(t){e.$set(e.listQuery,"professionId",t)},expression:"listQuery.professionId"}},e._l(e.professionList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)]),e._v(" "),s("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[s("i",{staticClass:"el-icon-tickets"}),e._v(" "),s("span",[e._v("班级数据")]),e._v(" "),s("el-button",{staticClass:"btn-add",attrs:{type:"danger",size:"mini"},on:{click:function(t){e.handleDelete()}}},[e._v("删除")]),e._v(" "),s("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){e.classModel={profession:{faculty:{}},teacher:{}},e.editDialog=!0,e.dialogTitle="添加"}}},[e._v("添加")])],1),e._v(" "),s("div",{staticClass:"table-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"professionTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.classid))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"指导老师",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.teacher?t.row.teacher.name:"-"))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"专业",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.profession?t.row.profession.name:"-"))]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.classModel=t.row,e.editDialog=!0,e.classModel.type="see",e.dialogTitle="查看"}}},[e._v("查看")]),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.classModel=t.row,e.editDialog=!0,e.dialogTitle="编辑",e.classModel.type="edit",e.getProfessionList(e.classModel.profession.faculty.id)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("div",{staticClass:"pagination-container"},[s("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":e.listQuery.limit,"page-sizes":[5,10,15],"current-page":e.listQuery.page,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editDialog,width:"30%"},on:{"update:visible":function(t){e.editDialog=t}}},[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"编号"}},[s("el-input",{attrs:{disabled:"see"==e.classModel.type},model:{value:e.classModel.classid,callback:function(t){e.$set(e.classModel,"classid",t)},expression:"classModel.classid"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学院："}},[s("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:"",disabled:"see"==e.classModel.type},on:{change:function(t){e.classModel.professionid=null,e.getProfessionList(e.classModel.profession.faculty.id)}},model:{value:e.classModel.profession.faculty.id,callback:function(t){e.$set(e.classModel.profession.faculty,"id",t)},expression:"classModel.profession.faculty.id"}},e._l(e.facultyList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"专业："}},[s("el-select",{attrs:{placeholder:"请选择专业",clearable:"",filterable:"",disabled:"see"==e.classModel.type},model:{value:e.classModel.professionid,callback:function(t){e.$set(e.classModel,"professionid",t)},expression:"classModel.professionid"}},e._l(e.professionList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"指导老师："}},[s("el-select",{attrs:{placeholder:"请选指导老师",clearable:"",filterable:"",disabled:"see"==e.classModel.type},model:{value:e.classModel.teacherid,callback:function(t){e.$set(e.classModel,"teacherid",t)},expression:"classModel.teacherid"}},e._l(e.teacherList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),"see"!=e.classModel.type?s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.edit()}}},[e._v("确 定")])],1):e._e()],1)],1)},staticRenderFns:[]},h=s("VU/8")(f,p,!1,null,null,null);t.default=h.exports},VR4j:function(e,t,s){"use strict";t.d=function(e){return Object(l.a)({url:"/profession/quire/list",method:"get",params:e})},t.c=function(e){return Object(l.a)({url:"/faculty/quire/list",method:"get",params:e})},t.f=function(e){return Object(l.a)({url:"/profession/findById",method:"get",params:{id:e}})},t.e=function(e){return Object(l.a)({url:"/teacher/quire/list",method:"get",params:e})},t.b=function(e){return Object(l.a)({url:"/profession/add",method:"post",params:e})},t.g=function(e){return Object(l.a)({url:"/profession/update",method:"put",params:e})},t.a=function(e){return Object(l.a)({url:"/profession/delete",method:"delete",params:e})};var l=s("vLgD")}});
//# sourceMappingURL=6.3f921ad99dae653610cc.js.map