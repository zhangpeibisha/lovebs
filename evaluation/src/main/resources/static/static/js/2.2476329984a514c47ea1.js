webpackJsonp([2],{"80Uw":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("IcnI"),i={props:{question:{type:Object,required:!0},qIndex:{type:Number,required:!0},qAnwser:{type:Object,required:!1,default:{}}},methods:{}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.question.title))]),t._v(" "),"text"!==t.question.questionnaireType?s("ol",{staticClass:"answers"},t._l(t.question.items,function(e){return s("li",{staticClass:"answer"},[s("input",{staticClass:"select",attrs:{type:t.question.questionnaireType,name:t.question.id,disabled:""},domProps:{value:e.id,checked:t.qAnwser.chooseId&&t.qAnwser.chooseId.split(",").indexOf(e.id)>=0}}),t._v(" "),s("div",{staticClass:"option"},[s("div",{staticClass:"input-fix"},[s("p",[t._v(t._s(e.title))]),t._v(" "),t.qAnwser.questionId?t._e():s("p",[t._v("分值:"),s("span",[t._v(t._s(e.weights))])])])])])})):t._e(),t._v(" "),"text"===t.question.questionnaireType?s("div",{staticClass:"option"},[s("textarea",{staticClass:"textarea",attrs:{disabled:""},domProps:{value:t.qAnwser.suggest}})]):t._e()]),t._v(" "),s("div",{staticClass:"side"},[s("div",{staticClass:"order"},[t._v("Q"+t._s(t.qIndex+1))])])])},staticRenderFns:[]};var n=s("VU/8")(i,o,!1,function(t){s("GfW4")},"data-v-3d0b4264",null).exports,l=s("NoTa"),r=s("UDO9"),u=s("l2la"),d=s("Ozlq"),c={data:function(){return{title:"",questions:[],author:{id:-1,jobNumber:"",name:"",imageUrl:"",correspondence:{phone:"",email:""}},isLoading:!1,dialogViewAuthorInfo:!1,formLabelWidth:"120px",qAnswers:[],evaluationId:0,publishId:0,roles:[]}},created:function(){this.getParams(),this.getPublish()},methods:{transposition:function(t,e,s){var a=t.splice(e,1)[0];t.splice(s,0,a)},saveBtnHandler:function(){this.saveData()},editEvaluation:function(){this.$router.push({path:"/task/reply",query:{publishEvaluationId:this.publishId}})},getAnswer:function(t){return(this.qAnswers.filter(function(e){return e.questionId===t.id})||[{}])[0]},findEvaluation:function(){var t=this;this.evaluationId&&Object(d.f)(this.evaluationId).then(function(e){if(console.log("查询问卷信息",e),200===e.code){var s=e.data;t.questions=s.content.questions,t.title=s.title,t.author=s.author,console.log("获取到作者的信息为",t.author)}})},getParams:function(){this.evaluationId=this.$route.query.evaluationId,this.publishId=this.$route.query.publishId},getPublish:function(){var t=this;console.log("----",this.publishId),this.publishId||!this.evaluationId?Object(d.e)({publishId:this.publishId}).then(function(e){console.log("查询发布的评卷表信息",e.data),t.evaluationId=e.data.evaluationQuestionnaire.id,e.data.answers&&e.data.answers.questionReplies&&(t.qAnswers=e.data.answers.questionReplies),t.findEvaluation()}):this.findEvaluation()},userRole:function(){var t=a.a.state.user;console.log("主页用户信息获取到：",t);var e=t.roles;this.insertRole(e),console.log("主页角色信息获取到：",this.roles)},insertRole:function(t){var e=this;t&&t.forEach(function(t){e.roles.push(t.name)})},back:function(){this.$router.push({path:"/task/teachTask"})}},components:{Question:n,Calendar:l.a,Alert:r.a,Modal:u.a}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout"},[s("el-dialog",{attrs:{title:"作者信息",visible:t.dialogViewAuthorInfo},on:{"update:visible":function(e){t.dialogViewAuthorInfo=e}}},[s("el-form",{attrs:{model:t.author}},[s("el-form-item",{attrs:{label:"名字","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.author.name,callback:function(e){t.$set(t.author,"name",e)},expression:"author.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"工号","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.author.jobNumber,callback:function(e){t.$set(t.author,"jobNumber",e)},expression:"author.jobNumber"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"手机","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.author.correspondence.phone,callback:function(e){t.$set(t.author.correspondence,"phone",e)},expression:"author.correspondence.phone"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮件","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.author.correspondence.email,callback:function(e){t.$set(t.author.correspondence,"email",e)},expression:"author.correspondence.email"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogViewAuthorInfo=!1}}},[t._v("确 定")])],1)],1),t._v(" "),s("div",{staticClass:"qn-wrap"},[s("div",{staticClass:"qn"},[s("header",{staticClass:"header"},[s("p",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"body"},[s("div",{staticClass:"body-wrap"},[0!==t.questions.length?s("ol",{staticClass:"questions"},t._l(t.questions,function(e,a){return s("question",{tag:"li",staticClass:"question",attrs:{"track-by":"$index",qIndex:a,question:e,qAnwser:t.getAnswer(e)}})})):t._e()])]),t._v(" "),s("footer",{staticClass:"footer"},[s("div",{staticClass:"pick-date"}),t._v(" "),s("div",{staticClass:"operation"},[s("span",{staticClass:"btn",class:{disabled:t.isLoading},on:{click:function(e){t.dialogViewAuthorInfo=!0}}},[t._v("查看作者信息")]),t._v(" "),s("span",{staticClass:"btn",class:{disabled:t.isLoading},on:{click:t.back}},[t._v("教学任务")])])])])])],1)},staticRenderFns:[]};var p=s("VU/8")(c,h,!1,function(t){s("q9Po")},null,null);e.default=p.exports},GfW4:function(t,e){},q9Po:function(t,e){}});
//# sourceMappingURL=2.2476329984a514c47ea1.js.map