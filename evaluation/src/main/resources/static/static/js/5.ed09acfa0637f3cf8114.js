webpackJsonp([5],{"+Lwc":function(t,e){},"1/sH":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("IcnI"),i=s("Ozlq"),l=s("Q3je"),a=s("4b3y"),n={name:"statistics",data:function(){return{roles:[],topicStatistics:[],questionConfig:{},optionStatistics:[],adviseList:[],showAdviseList:!1,showConfig:!1,showOptionStatistics:!1,title:"重庆理工大学",publishId:0,topicTitle:"",showRankList:!1,schoolYear:[2019,2018],semester:[{name:"第一学期",type:"FIRST"},{name:"第二学期",type:"SECOND"}],faculty:[],queryRank:{}}},created:function(){this.findStatisticsScore(),this.userRole(),this.selectSchoolYearList(),this.findUserFaculty()},methods:{userRole:function(){var t=o.a.state.user;console.log("主页用户信息获取到：",t);var e=t.roles;this.insertRole(e),console.log("主页角色信息获取到：",this.roles)},insertRole:function(t){var e=this;t&&t.forEach(function(t){e.roles.push(t.name)})},findUserFaculty:function(){var t=this;Object(a.e)().then(function(e){console.log("获取用户学院信息",e),console.log("获取用户学院信息====",e.data),e.data&&null!==e.data&&e.data.forEach(function(e){e&&null!==e&&t.faculty.push(e)})})},viewOptionStatistics:function(t){this.optionStatistics=t.optionStatistics,this.topicTitle=t.title,this.showOptionStatistics=!0},findStatisticsScore:function(){var t=this;this.publishId=this.$route.query.publishEvaluationId,Object(i.l)(this.publishId).then(function(e){t.topicStatistics=e.data.topicStatistics,t.questionConfig=e.data,t.title=e.data.title,t.topicStatistics||t.$message("该评教卷还未有学生回答")})},selectSchoolYearList:function(){var t=this;Object(l.b)().then(function(e){console.log("获取到的学年信息未",e),t.schoolYear=e.data})},viewRank:function(){this.showRankList=!1,this.$router.push({path:"/task/rank",query:this.queryRank})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container",staticStyle:{height:"500px","overflow-y":"scroll"}},[s("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v("评教表详细统计-"+t._s(t.title))]),t._v(" "),s("el-button",{staticClass:"btn-add",attrs:{type:"success",size:"mini"},on:{click:function(e){t.showRankList=!0}}},[t._v("查看学院排名\n    ")]),t._v(" "),s("el-button",{staticClass:"btn-add",attrs:{type:"success",size:"mini"},on:{click:function(e){t.showAdviseList=!0}}},[t._v("查看学生意见\n    ")]),t._v(" "),s("el-button",{staticClass:"btn-add",attrs:{type:"success",size:"mini"},on:{click:function(e){t.showConfig=!0}}},[t._v("查看概要\n    ")])],1),t._v(" "),s("el-dialog",{attrs:{title:"评卷表概要",visible:t.showConfig},on:{"update:visible":function(e){t.showConfig=e}}},[s("el-form",[s("el-form-item",{attrs:{label:"总分"}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.questionConfig.totalScore,callback:function(e){t.$set(t.questionConfig,"totalScore",e)},expression:"questionConfig.totalScore"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"平均分"}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.questionConfig.avgScore,callback:function(e){t.$set(t.questionConfig,"avgScore",e)},expression:"questionConfig.avgScore"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"计划人数"}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.questionConfig.shouldAnswer,callback:function(e){t.$set(t.questionConfig,"shouldAnswer",e)},expression:"questionConfig.shouldAnswer"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"回答人数"}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.questionConfig.realityAnswer,callback:function(e){t.$set(t.questionConfig,"realityAnswer",e)},expression:"questionConfig.realityAnswer"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"黑名单配置数量"}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.questionConfig.blackNumber,callback:function(e){t.$set(t.questionConfig,"blackNumber",e)},expression:"questionConfig.blackNumber"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showConfig=!1}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.topicTitle,visible:t.showOptionStatistics},on:{"update:visible":function(e){t.showOptionStatistics=e}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.optionStatistics,border:""}},[s("el-table-column",{attrs:{align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"选项分数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.score))]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"选择人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.chooseOfNumber))]}}])})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"学生建议",visible:t.showAdviseList},on:{"update:visible":function(e){t.showAdviseList=e}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.questionConfig.adviseList,border:""}},[s("el-table-column",{attrs:{align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"建议"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.advice))]}}])})],1)],1),t._v(" "),s("div",{staticClass:"table-container"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.topicStatistics,border:"","max-height":"350"}},[s("el-table-column",{attrs:{label:"标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"总分",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.totalScore))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平均分",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.avgScore))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"选择人数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.chooseOfNumber))]}}])}),t._v(" "),s("el-table-column",{staticStyle:{width:"600px"},attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.viewOptionStatistics(e.row)}}},[t._v("选项统计")])]}}])})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"学院排名统计",visible:t.showRankList},on:{"update:visible":function(e){t.showRankList=e}}},[s("el-form",{attrs:{model:t.queryRank}},[s("el-form-item",{attrs:{label:"学院"}},[s("el-select",{attrs:{placeholder:"请选择学院",clearable:"",filterable:""},model:{value:t.queryRank.facultyId,callback:function(e){t.$set(t.queryRank,"facultyId",e)},expression:"queryRank.facultyId"}},t._l(t.faculty,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"学年"}},[s("el-select",{attrs:{placeholder:"请选择学年",clearable:"",filterable:""},model:{value:t.queryRank.year,callback:function(e){t.$set(t.queryRank,"year",e)},expression:"queryRank.year"}},t._l(t.schoolYear,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"学期"}},[s("el-select",{attrs:{placeholder:"请选择学期",clearable:"",filterable:""},model:{value:t.queryRank.semester,callback:function(e){t.$set(t.queryRank,"semester",e)},expression:"queryRank.semester"}},t._l(t.semester,function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.showRankList=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.viewRank}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(n,r,!1,function(t){s("+Lwc")},null,null);e.default=c.exports},Q3je:function(t,e,s){"use strict";e.a=function(t){return Object(o.a)({url:"/teacherCourse/teachTask",method:"get",params:t})},e.b=function(){return Object(o.a)({url:"/teacherCourse/school/year",method:"get"})};var o=s("vLgD")}});
//# sourceMappingURL=5.ed09acfa0637f3cf8114.js.map