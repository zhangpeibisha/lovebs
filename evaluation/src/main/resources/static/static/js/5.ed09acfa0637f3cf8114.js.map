{"version":3,"sources":["webpack:///src/views/question/statistics/index.vue","webpack:///./src/views/question/statistics/index.vue?0626","webpack:///./src/views/question/statistics/index.vue","webpack:///./src/api/task.js"],"names":["name","data","roles","topicStatistics","questionConfig","optionStatistics","adviseList","showAdviseList","showConfig","showOptionStatistics","title","publishId","topicTitle","showRankList","schoolYear","semester","type","faculty","queryRank","created","this","findStatisticsScore","userRole","selectSchoolYearList","findUserFaculty","methods","user","store","state","console","log","insertRole","_this","forEach","res","push","_this2","Object","then","viewOptionStatistics","row","_this3","$route","query","publishEvaluationId","question","$message","_this4","task","viewRank","$router","path","question_statistics","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","overflow-y","attrs","shadow","_v","_s","size","on","click","$event","visible","update:visible","label","autocomplete","disabled","model","value","callback","$$v","$set","expression","slot","width","border","align","scopedSlots","_u","key","fn","scope","score","chooseOfNumber","advice","max-height","totalScore","avgScore","fixed","placeholder","clearable","filterable","_l","item","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","statistics","ssrContext","__webpack_exports__","params","__WEBPACK_IMPORTED_MODULE_0__utils_request__","url","method"],"mappings":"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","file":"static/js/5.ed09acfa0637f3cf8114.js","sourcesContent":["<template>\r\n  <div class=\"app-container\" style=\"height: 500px; overflow-y: scroll;\">\r\n    <el-card class=\"operate-container\" shadow=\"never\">\r\n      <i class=\"el-icon-tickets\"></i>\r\n      <span>评教表详细统计-{{title}}</span>\r\n      <el-button\r\n        class=\"btn-add\" type=\"success\" @click=\"showRankList=true\" size=\"mini\">查看学院排名\r\n      </el-button>\r\n      <el-button\r\n        class=\"btn-add\" type=\"success\" @click=\"showAdviseList=true\" size=\"mini\">查看学生意见\r\n      </el-button>\r\n      <el-button\r\n        class=\"btn-add\" type=\"success\" @click=\"showConfig=true\" size=\"mini\">查看概要\r\n      </el-button>\r\n    </el-card>\r\n\r\n    <el-dialog title=\"评卷表概要\" :visible.sync=\"showConfig\">\r\n      <el-form>\r\n        <el-form-item label=\"总分\">\r\n          <el-input v-model=\"questionConfig.totalScore\" autocomplete=\"off\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"平均分\">\r\n          <el-input v-model=\"questionConfig.avgScore\" autocomplete=\"off\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"计划人数\">\r\n          <el-input v-model=\"questionConfig.shouldAnswer\" autocomplete=\"off\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"回答人数\">\r\n          <el-input v-model=\"questionConfig.realityAnswer\" autocomplete=\"off\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"黑名单配置数量\">\r\n          <el-input v-model=\"questionConfig.blackNumber\" autocomplete=\"off\" disabled></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"showConfig = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog :title=\"topicTitle\" :visible.sync=\"showOptionStatistics\">\r\n      <el-table :data=\"optionStatistics\"\r\n                style=\"width: 100%\"\r\n                border>\r\n        <el-table-column align=\"center\" label=\"标题\">\r\n          <template slot-scope=\"scope\">{{scope.row.title}}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"选项分数\">\r\n          <template slot-scope=\"scope\">{{scope.row.score}}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"选择人数\">\r\n          <template slot-scope=\"scope\">{{scope.row.chooseOfNumber}}</template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n    <el-dialog title=\"学生建议\" :visible.sync=\"showAdviseList\">\r\n      <el-table :data=\"questionConfig.adviseList\"\r\n                style=\"width: 100%\"\r\n                border>\r\n        <el-table-column align=\"center\" label=\"标题\">\r\n          <template slot-scope=\"scope\">{{scope.row.title}}</template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"建议\">\r\n          <template slot-scope=\"scope\">{{scope.row.advice}}</template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n    <div class=\"table-container\">\r\n      <el-table\r\n        :data=\"topicStatistics\"\r\n        style=\"width: 100%\"\r\n        border\r\n        max-height=\"350\">\r\n        <el-table-column label=\"标题\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{scope.row.title}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"总分\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{scope.row.totalScore}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"平均分\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{scope.row.avgScore}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"选择人数\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{scope.row.chooseOfNumber}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" style=\"width: 600px\" fixed=\"right\">\r\n          <template slot-scope=\"scope\">\r\n            <!--老师和管理员查看内容-->\r\n            <el-button size=\"mini\" @click=\"viewOptionStatistics(scope.row)\">选项统计</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n\r\n    <el-dialog title=\"学院排名统计\" :visible.sync=\"showRankList\">\r\n      <el-form :model=\"queryRank\">\r\n        <el-form-item label=\"学院\">\r\n          <el-select\r\n            v-model=\"queryRank.facultyId\"\r\n            placeholder=\"请选择学院\"\r\n            clearable\r\n            filterable>\r\n            <el-option\r\n              v-for=\"item in faculty\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"学年\">\r\n          <el-select\r\n            v-model=\"queryRank.year\"\r\n            placeholder=\"请选择学年\"\r\n            clearable\r\n            filterable>\r\n            <el-option\r\n              v-for=\"item in schoolYear\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"学期\">\r\n          <el-select\r\n            v-model=\"queryRank.semester\"\r\n            placeholder=\"请选择学期\"\r\n            clearable\r\n            filterable>\r\n            <el-option\r\n              v-for=\"item in semester\"\r\n              :key=\"item.name\"\r\n              :label=\"item.name\"\r\n              :value=\"item.name\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showRankList = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"viewRank\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  import store from '@/store'\r\n  import {statisticsScore} from '@/api/question'\r\n  import {findSchoolYearList} from '@/api/task'\r\n  import {findUserFaculty} from '@/api/faculty'\r\n\r\n  export default {\r\n    name: \"statistics\",\r\n    data() {\r\n      return {\r\n        roles: [],\r\n        topicStatistics: [],\r\n        questionConfig: {},\r\n        optionStatistics: [],\r\n        adviseList: [],\r\n        showAdviseList: false,\r\n        showConfig: false,\r\n        showOptionStatistics: false,\r\n        title: '重庆理工大学',\r\n        publishId: 0,\r\n        topicTitle: '',\r\n        showRankList: false,\r\n        schoolYear: [2019, 2018],\r\n        semester: [{\r\n          name: '第一学期',\r\n          type: 'FIRST'\r\n        }, {\r\n          name: '第二学期',\r\n          type: 'SECOND'\r\n        }],\r\n        faculty: [],\r\n        queryRank: {}\r\n      };\r\n    },\r\n    created() {\r\n      this.findStatisticsScore();\r\n      this.userRole();\r\n      this.selectSchoolYearList();\r\n      this.findUserFaculty();\r\n    },\r\n    methods: {\r\n      userRole() {\r\n        const user = store.state.user;\r\n        console.log(\"主页用户信息获取到：\", user);\r\n        const roles = user.roles;\r\n        this.insertRole(roles);\r\n        console.log(\"主页角色信息获取到：\", this.roles);\r\n      }, insertRole(roles) {\r\n        if (roles) {\r\n          roles.forEach(res => {\r\n            this.roles.push(res.name);\r\n          })\r\n        }\r\n      },\r\n      findUserFaculty() {\r\n        findUserFaculty().then(res => {\r\n          console.log(\"获取用户学院信息\", res);\r\n          console.log(\"获取用户学院信息====\", res.data);\r\n          if (res.data && res.data !== null) {\r\n            res.data.forEach(data => {\r\n              if (data && data !== null) {\r\n                this.faculty.push(data);\r\n              }\r\n            })\r\n          }\r\n        })\r\n      },\r\n      viewOptionStatistics(row) {\r\n        this.optionStatistics = row.optionStatistics;\r\n        this.topicTitle = row.title;\r\n        this.showOptionStatistics = true;\r\n      }, findStatisticsScore() {\r\n        // 从路由中获取的参数\r\n        this.publishId = this.$route.query.publishEvaluationId;\r\n        statisticsScore(this.publishId).then(res => {\r\n          this.topicStatistics = res.data.topicStatistics;\r\n          this.questionConfig = res.data;\r\n          this.title = res.data.title;\r\n          if (!this.topicStatistics) {\r\n            this.$message('该评教卷还未有学生回答');\r\n          }\r\n        })\r\n      }, selectSchoolYearList() {\r\n        findSchoolYearList().then(res => {\r\n          console.log(\"获取到的学年信息未\", res);\r\n          this.schoolYear = res.data;\r\n        })\r\n      }, viewRank() {\r\n        this.showRankList = false;\r\n        this.$router.push({\r\n          path: \"/task/rank\",\r\n          query: this.queryRank\r\n        })\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .demo-table-expand {\r\n    font-size: 0;\r\n  }\r\n\r\n  .demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n  }\r\n\r\n  .demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n  }\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/question/statistics/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\",staticStyle:{\"height\":\"500px\",\"overflow-y\":\"scroll\"}},[_c('el-card',{staticClass:\"operate-container\",attrs:{\"shadow\":\"never\"}},[_c('i',{staticClass:\"el-icon-tickets\"}),_vm._v(\" \"),_c('span',[_vm._v(\"评教表详细统计-\"+_vm._s(_vm.title))]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-add\",attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showRankList=true}}},[_vm._v(\"查看学院排名\\n    \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-add\",attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showAdviseList=true}}},[_vm._v(\"查看学生意见\\n    \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-add\",attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showConfig=true}}},[_vm._v(\"查看概要\\n    \")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"评卷表概要\",\"visible\":_vm.showConfig},on:{\"update:visible\":function($event){_vm.showConfig=$event}}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"总分\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.questionConfig.totalScore),callback:function ($$v) {_vm.$set(_vm.questionConfig, \"totalScore\", $$v)},expression:\"questionConfig.totalScore\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平均分\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.questionConfig.avgScore),callback:function ($$v) {_vm.$set(_vm.questionConfig, \"avgScore\", $$v)},expression:\"questionConfig.avgScore\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"计划人数\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.questionConfig.shouldAnswer),callback:function ($$v) {_vm.$set(_vm.questionConfig, \"shouldAnswer\", $$v)},expression:\"questionConfig.shouldAnswer\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"回答人数\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.questionConfig.realityAnswer),callback:function ($$v) {_vm.$set(_vm.questionConfig, \"realityAnswer\", $$v)},expression:\"questionConfig.realityAnswer\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"黑名单配置数量\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.questionConfig.blackNumber),callback:function ($$v) {_vm.$set(_vm.questionConfig, \"blackNumber\", $$v)},expression:\"questionConfig.blackNumber\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showConfig = false}}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.topicTitle,\"visible\":_vm.showOptionStatistics},on:{\"update:visible\":function($event){_vm.showOptionStatistics=$event}}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.optionStatistics,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"标题\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.title))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"选项分数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.score))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"选择人数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.chooseOfNumber))]}}])})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"学生建议\",\"visible\":_vm.showAdviseList},on:{\"update:visible\":function($event){_vm.showAdviseList=$event}}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.questionConfig.adviseList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"标题\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.title))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"建议\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.advice))]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"table-container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.topicStatistics,\"border\":\"\",\"max-height\":\"350\"}},[_c('el-table-column',{attrs:{\"label\":\"标题\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.title))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"总分\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.totalScore))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"平均分\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.avgScore))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"选择人数\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.chooseOfNumber))]}}])}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"操作\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.viewOptionStatistics(scope.row)}}},[_vm._v(\"选项统计\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"学院排名统计\",\"visible\":_vm.showRankList},on:{\"update:visible\":function($event){_vm.showRankList=$event}}},[_c('el-form',{attrs:{\"model\":_vm.queryRank}},[_c('el-form-item',{attrs:{\"label\":\"学院\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择学院\",\"clearable\":\"\",\"filterable\":\"\"},model:{value:(_vm.queryRank.facultyId),callback:function ($$v) {_vm.$set(_vm.queryRank, \"facultyId\", $$v)},expression:\"queryRank.facultyId\"}},_vm._l((_vm.faculty),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"学年\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择学年\",\"clearable\":\"\",\"filterable\":\"\"},model:{value:(_vm.queryRank.year),callback:function ($$v) {_vm.$set(_vm.queryRank, \"year\", $$v)},expression:\"queryRank.year\"}},_vm._l((_vm.schoolYear),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"学期\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择学期\",\"clearable\":\"\",\"filterable\":\"\"},model:{value:(_vm.queryRank.semester),callback:function ($$v) {_vm.$set(_vm.queryRank, \"semester\", $$v)},expression:\"queryRank.semester\"}},_vm._l((_vm.semester),function(item){return _c('el-option',{key:item.name,attrs:{\"label\":item.name,\"value\":item.name}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showRankList = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.viewRank}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-abd4c156\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/question/statistics/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-abd4c156\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-abd4c156\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/question/statistics/index.vue\n// module id = null\n// module chunks = ","import request from '@/utils/request'\r\n\r\n\r\nexport function fetchListAll(params) {\r\n  return request({\r\n    url:'/teacherCourse/teachTask',\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\n\r\nexport function findSchoolYearList() {\r\n  return request({\r\n    url:'/teacherCourse/school/year',\r\n    method:'get'\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/task.js"],"sourceRoot":""}