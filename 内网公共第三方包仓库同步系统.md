# 项目背景

目前的软件开发模式，相较几年前，已经发生了很大的改变，第三方包的应用越来越广泛，人们不再自己造轮子，而是选择采用开源的包来加快开发速度。比如：

Java的Maven

PHP的Composer

Python的Pypi

Node的Npm

......

出于代码安全的考虑，我们日常的开发都是在内网进行的，而内网是无法联网的，不能直接使用外网的第三方包管理平台。因此，在内网构建一个高质量的、`安全`的第三方包管理仓库，就显得尤为重要了。

之前我们也在内网搭建了各个语言的第三方包管理仓库，但是存在如下问题：

1、包的同步是直接开通了内网访问外网的权限，在内网拉取外网包文件进行的，这存在极大的安全隐患！如果你所需的包或者其依赖的包，存在病毒，就会将病毒直接拉到内网(参考之前外网虚拟机中毒的案例，所有人的邮件全被删了；如果我们不小心把病毒导入内网，可能会导致所有代码库全被清空，这是无法承担的严重后果)。

2、如果我们禁掉外网连接内网的权限，改为手动在外网下载好包，然后通过跳板机杀毒，再传入内网，导入仓库，那么部分语言的包会无法使用，且这个操作效率也很低，浪费大量人力。因为一些语言的包管理，并非只是简单的拷贝文件(比如node的仓库，更新包的时候除了包文件之外，还需要解析各个包的依赖关系，存入数据库；php的仓库也需要做解析依赖关系、生成缓存等操作)。

因此，我们需要设计一个安全、自动化的方案，在内网构建各个语言的第三方包管理仓库。

# 需求说明

1.在外网找一台机器，搭建各语言私有的包仓库；当各业务方有更新包的需求时，直接在外网通过自助页面提出申请，管理人员审核通过后，这些任务会加入一个队列，然后通过脚本扫描队列，执行下载、杀毒、通知等操作

2.开通内网访问这台外网服务器的权限

3.在内网服务器搭建私有包仓库

4.将内网各仓库的源改为外网我们搭建的私有仓库地址，保证内网下载到的都是干净无毒的文件

# 知识要点

Maven

Nexus

第三方包仓库

SpringBoot框架

MyBatis

MySQL

Redis

Quartz定时任务

消息队列

程序设计

# 参考答案

无